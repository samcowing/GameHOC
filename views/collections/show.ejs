<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="/collections-css/show.css">
    <title>Collection Show Page</title>
</head>

<body>
    <div class="body-head-container">
        <div class="body-head-title">
            <h1><%= collection.title %></h1>
        </div>
    </div>
    <div class="body-head-items">
        <div class="body-head-descr"><h4><%= collection.description %></h4></div>
        <div class="body-head-btns">
            <div class="top-btns">
                <a class="edit" href="/collections">Back</a>
                <a class="edit" href="/collections/<%=collection._id%>/edit">Edit</a>   
                <a class="add" href="/collections/<%=collection._id%>/addgames">Add Games</a>
            </div> 
            <div class="deleteColl">
                <form method="POST" action="/collections/<%=collection._id%>?_method=DELETE">
                    <input class="delete" type="submit" value="Delete Collection" >
                </form>
            </div>
        </div>
    </div>
    <div class="games-container">
    <% if (collection.games.length > 0) { %>
        <% for (let i=0; i < games.length; i++) { %>
         <div class="card-deck">
                <div class="card">
                    <img class="img-sm" src="<%= games[i].background_image %>">
                    <div class="card-body">
                        <img class="img-lg" src="<%= games[i].background_image %>">
                        <div class="game-info">
                            <div class="card-title">
                                <h3><%= games[i].name %></h3>
                            </div>
                            <p>Rating: <%= games[i].rating %></p>
                            <p>Release Date: <%= games[i].released %></p>
                            <% if (games[i].esrb_rating !== null) { %>
                                <p><%= games[i].esrb_rating.name %></p>
                            <% } else { %>
                                <p>10+ Everyone</p>
                            <% } %>
                        </div>
                        <div class="game-btns-container">
                            <div class="metacritic">
                                <p class="metacritic-rating"><%= games[i].metacritic %></p>
                            </div>
                            <div class="shape"></div>
                            <div class="game-btns">
                                <br/>
                                <a class="view" href="/games/<%=games[i].id%>">View</a> 
                                <br class="space"/>
                                <form class="delete-form" action="/collections/<%=collection._id%>/<%=games[i].id%>?_method=DELETE" method="POST">
                                    <input class="deleteGame" type="submit" value="Delete">
                                </form>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        <% } %> 
    <% } %>
    </div>
    

    <!-- BOOTSTRAP -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
</body>

</html>